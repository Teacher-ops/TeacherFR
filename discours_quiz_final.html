<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz interactif : Discours direct et indirect</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
  body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(120deg, #e0f7fa, #80deea);
    color: #073642;
    min-height: 100vh;
    padding: 15px;
    -webkit-tap-highlight-color: transparent;
  }
  header {
    background-color: #00796b;
    padding: 25px 15px;
    text-align: center;
    color: white;
    font-weight: 700;
    font-size: 2rem;
    border-radius: 10px;
    box-shadow: 0 6px 15px #004d40cc;
  }
  main {
    max-width: 720px;
    margin: 25px auto;
    background: white;
    border-radius: 20px;
    padding: 35px 45px;
    box-shadow: 0 16px 30px rgba(0, 0, 0, 0.08);
    box-sizing: border-box;
  }
  .slide {
    display: none;
    animation: fadeIn 0.6s ease forwards;
  }
  .slide.active {
    display: block;
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(20px);}
    to {opacity: 1; transform: translateY(0);}
  }
  h2 {
    margin-top: 0;
    border-bottom: 3px solid #004d40;
    padding-bottom: 10px;
    color: #004d40;
  }
  p, label {
    font-size: 1.1rem;
    line-height: 1.6;
  }
  .options label {
    display: block;
    background-color: #b2ebf2;
    padding: 12px 22px;
    border-radius: 18px;
    margin: 12px 0 0 0;
    cursor: pointer;
    user-select:none;
    transition: background-color 0.3s ease;
  }
  .options label:hover, .options label:focus-within {
    background-color: #80deea;
  }
  input[type="radio"] {
    margin-right: 19px;
    vertical-align: middle;
    transform: scale(1.3);
  }
  .navigation {
    margin: 40px 0 0;
    text-align: center;
    user-select:none;
  }
  button {
    background-color: #00796b;
    color: white;
    border: none;
    border-radius: 40px;
    font-size: 1.15rem;
    font-weight: 700;
    padding: 18px 60px;
    margin: 0 15px;
    cursor: pointer;
    box-shadow: 0 6px 15px #004d40cc;
    transition: background-color 0.3s ease;
    user-select: none;
    -webkit-user-select:none;
  }
  button:disabled {
    background-color: #999999;
    cursor: not-allowed;
    box-shadow: none;
  }
  button:hover:not(:disabled) {
    background-color: #004d40;
  }
  .score {
    font-weight: 700;
    font-size: 1.35rem;
    text-align: center;
    margin-bottom: 24px;
    color: #004d40;
  }
  .solution {
    background: #f1f8f7;
    border-left: 8px solid #009688cc;
    border-radius: 16px;
    padding: 22px 30px;
    margin-bottom: 32px;
  }
  .solution h3 {
    margin-top: 0;
    color: #004d40;
  }
  .correct-answer {
    color: #2e7d32;
    font-weight: 700;
  }
  .incorrect-answer {
    color: #d32f2f;
    font-weight: 700;
  }
  .explanation {
    font-style: italic;
    margin-top: 10px;
    color: #555;
  }
  @media (max-width: 600px) {
    main {
      padding: 30px 25px;
      margin: 15px;
    }
    header {
      font-size: 1.5rem;
      padding: 20px 15px;
    }
    button {
      padding: 16px 38px;
      margin: 12px 6px;
      font-size: 1rem;
    }
    .navigation {
      margin: 32px 0 0;
    }
  }
</style>
</head>
<body>
<header>Discours direct et indirect - Quiz</header>
<main>
  <div class="slide active" id="slide0">
    <h2>Introduction</h2>
    <p>Le discours direct est la manière de rapporter les paroles telles qu'elles ont été prononcées, souvent encadrées par des guillemets.</p>
    <p>Le discours indirect consiste à rapporter ces paroles sans les citer textuellement, en modifiant la construction de la phrase.</p>
    <div class="navigation">
      <button id="startBtn">Commencer le Quiz</button>
    </div>
  </div>

  <form id="quizForm" novalidate>

    <div class="slide" id="slide1">
      <h2>1. Transformez en discours indirect :</h2>
      <p>Paul a expliqué : « Je travaille demain. »</p>
      <div class="options">
        <label><input type="radio" name="q1" value="a">Paul a expliqué qu'il travaille demain.</label>
        <label><input type="radio" name="q1" value="b">Paul a expliqué qu'il travaillerait demain.</label>
        <label><input type="radio" name="q1" value="c">Paul a expliqué qu'il travaillera demain.</label>
      </div>
    </div>

    <div class="slide" id="slide2">
      <h2>2. Transformez en discours indirect :</h2>
      <p>Le professeur a dit : « Vous devez étudier pour l'examen. »</p>
      <div class="options">
        <label><input type="radio" name="q2" value="a">Le professeur a dit que vous devez étudier pour l'examen.</label>
        <label><input type="radio" name="q2" value="b">Le professeur a dit que vous deviez étudier pour l'examen.</label>
        <label><input type="radio" name="q2" value="c">Le professeur a dit que vous avez étudié pour l'examen.</label>
      </div>
    </div>

    <div class="slide" id="slide3">
      <h2>3. Réécrivez en discours direct :</h2>
      <p>Il a affirmé qu'il viendrait ce soir.</p>
      <div class="options">
        <label><input type="radio" name="q3" value="a">Il a dit : « Je viendrai ce soir. »</label>
        <label><input type="radio" name="q3" value="b">Il a dit : « Il venait ce soir. »</label>
        <label><input type="radio" name="q3" value="c">Il a dit : « Il a venu ce soir. »</label>
      </div>
    </div>

    <div class="slide" id="slide4">
      <h2>4. Réécrivez en discours direct :</h2>
      <p>Elle a demandé si tu pouvais l'aider.</p>
      <div class="options">
        <label><input type="radio" name="q4" value="a">Elle a demandé : « Peux-tu m'aider ? »</label>
        <label><input type="radio" name="q4" value="b">Elle a demandé : « Tu peux m'aider ? »</label>
        <label><input type="radio" name="q4" value="c">Elle a demandé : « Peux-tu lui aider ? »</label>
      </div>
    </div>

    <div class="slide" id="slide5">
      <h2>Résultats et solutions :</h2>
      <div id="scoreDisplay" class="score"></div>
      <div id="solutionsDisplay"></div>
      <div class="navigation">
        <button type="button" id="restartBtn">Recommencer le Quiz</button>
      </div>
    </div>

    <div class="navigation" id="navButtons" style="text-align:center;">
      <button type="button" id="prevBtn">Précédent</button>
      <button type="submit" id="nextBtn">Suivant</button>
    </div>
  </form>
</main>

<script>
  (() => {
    const slides = document.querySelectorAll('.slide');
    const form = document.getElementById('quizForm');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const solutionsDisplay = document.getElementById('solutionsDisplay');
    const navButtons = document.getElementById('navButtons');
    let currentSlide = 0;

    const correctAnswers = {
      q1: 'b',
      q2: 'b',
      q3: 'a',
      q4: 'a'
    };

    const explanations = {
      q1: "Au discours indirect, le verbe « travaille » change en « travaillerait » pour respecter la concordance des temps.",
      q2: "Le temps du verbe s'adapte au discours indirect dans la phrase correcte.",
      q3: "La phrase revient à la forme originale de discours direct avec les pronoms et temps corrects.",
      q4: "La question directe initiale est correctement reformulée."
    };

    const answerTexts = {
      q1: {
        a: "Paul a expliqué qu'il travaille demain.",
        b: "Paul a expliqué qu'il travaillerait demain.",
        c: "Paul a expliqué qu'il travaillera demain."
      },
      q2: {
        a: "Le professeur a dit que vous devez étudier pour l'examen.",
        b: "Le professeur a dit que vous deviez étudier pour l'examen.",
        c: "Le professeur a dit que vous avez étudié pour l'examen."
      },
      q3: {
        a: "Il a dit : « Je viendrai ce soir. »",
        b: "Il a dit : « Il venait ce soir. »",
        c: "Il a dit : « Il a venu ce soir. »"
      },
      q4: {
        a: "Elle a demandé : « Peux-tu m'aider ? »",
        b: "Elle a demandé : « Tu peux m'aider ? »",
        c: "Elle a demandé : « Peux-tu lui aider ? »"
      }
    };

    function showSlide(index) {
      slides.forEach((slide, idx) => slide.classList.toggle('active', idx === index));
      currentSlide = index;

      // Hide navigation buttons on intro slide
      if (index === 0) {
        navButtons.style.display = 'none';
      } else {
        navButtons.style.display = 'block';
      }

      prevBtn.disabled = index <= 1;

      if (index === slides.length - 2) {
        nextBtn.textContent = 'Voir les solutions';
      } else if (index === slides.length - 1) {
        nextBtn.style.display = 'none';
        prevBtn.style.display = 'none';
      } else {
        nextBtn.textContent = 'Suivant';
        nextBtn.style.display = 'inline-block';
        prevBtn.style.display = 'inline-block';
      }
    }

    function displayResults() {
      let score = 0;
      solutionsDisplay.innerHTML = '';

      for (const qId of Object.keys(correctAnswers)) {
        const selected = form.elements[qId].value;
        const correct = correctAnswers[qId];

        const container = document.createElement('div');
        container.className = 'solution';

        const h3 = document.createElement('h3');
        h3.textContent = `Question ${qId.slice(1)}`;
        container.appendChild(h3);

        if (!selected) {
          const pNoAnswer = document.createElement('p');
          pNoAnswer.textContent = 'Vous n\'avez pas répondu à cette question.';
          pNoAnswer.style.color = '#d97706';
          container.appendChild(pNoAnswer);
        }

        for (const option of ['a', 'b', 'c']) {
          const div = document.createElement('div');
          div.textContent = answerTexts[qId][option];
          div.style.padding = '10px 14px';
          div.style.marginTop = '6px';
          div.style.borderRadius = '12px';

          if (option === correct) {
            div.style.backgroundColor = '#c8e6c9';
            div.style.color = '#2e7d32';
            div.style.borderLeft = '6px solid #2e7d32';
          } else if (selected === option && option !== correct) {
            div.style.backgroundColor = '#ffcdd2';
            div.style.color = '#d32f2f';
            div.style.borderLeft = '6px solid #d32f2f';
          } else {
            div.style.backgroundColor = '#f0f0f0';
            div.style.color = '#555';
          }
          container.appendChild(div);
        }

        const explanation = document.createElement('p');
        explanation.className = 'explanation';
        explanation.textContent = explanations[qId];
        container.appendChild(explanation);

        solutionsDisplay.appendChild(container);

        if (selected === correct) score++;
      }

      scoreDisplay.textContent = `Votre score est ${score} sur ${Object.keys(correctAnswers).length}`;
    }

    function nextSlide() {
      if (currentSlide >= 1 && currentSlide < slides.length - 2) {
        const currentQ = "q" + currentSlide;
        const selected = form.elements[currentQ].value;
        if (!selected) {
          alert('Veuillez sélectionner une réponse avant de continuer.');
          return;
        }
      }

      if (currentSlide === slides.length - 2) {
        displayResults();
        showSlide(currentSlide + 1);
        return;
      }
      showSlide(currentSlide + 1);
    }

    function prevSlide() {
      if (currentSlide > 0) {
        showSlide(currentSlide - 1);
      }
    }

    function restartQuiz() {
      form.reset();
      showSlide(0);
    }

    startBtn.addEventListener('click', () => showSlide(1));
    nextBtn.addEventListener('click', e => {
      e.preventDefault();
      nextSlide();
    });
    prevBtn.addEventListener('click', prevSlide);
    restartBtn.addEventListener('click', restartQuiz);

    showSlide(0);
  })();
</script>
</body>
</html>
